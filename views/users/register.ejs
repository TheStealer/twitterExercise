<!DOCTYPE html>
<html lang="en">
    <head><Title>Registro</Title>
    </head>
<body>

    <% if(locals.isLogged){ %>
        <script>  document.location.href = '/profile' </script>
        <% } else { %>

    <main>
        <div >
            <div >
                <div ><h1>Regístrate</h1> </div>
                <h3 >Al crear una cuenta con nosotros, podrás agilizar el proceso de compra,
                    guardar múltiples direcciones de envío, rastrear pedidos y más.</h3>

                <form action="/register" method="POST" enctype="multipart/form-data">
                    <div>
                        <label for="name">Nombre (s):
                            <input 
                                type="text" 
                                id="name" 
                                name="nameUser" 
                                class="control"
                                value= "<%= locals.oldData ? oldData.nameUser : null %>"
                            >
                        </label>
                        <% if (locals.errors && errors.nameUser) {%>
                            <div class="text-danger">
                                <%= errors.nameUser.msg %>
                            </div>
                        <%} %>
                        <br><br>

                        <label for="fname">Apellido paterno:
                            <input 
                                type="text" 
                                id="fname" 
                                name="lastName" 
                                class="control"
                                value= "<%= locals.oldData ? oldData.lastName : null %>"
                            >
                        </label>
                        <% if (locals.errors && errors.lastName) {%>
                            <div class="text-danger">
                                <%= errors.lastName.msg %>
                            </div>
                        <%} %><br><br>

                        <label for="fMname">Apellido materno:
                            <input 
                                type="text" 
                                id="fMname" 
                                name="lastNameM" 
                                class="control"
                                value= "<%= locals.oldData ? oldData.lastNameM : null %>"
                            >
                        </label>
                        <% if (locals.errors && errors.lastNameM) {%>
                            <div class="text-danger">
                                <%= errors.lastNameM.msg %>
                            </div>
                        <%} %><br><br>

                        <label for="email">Correo electrónico:
                            <input 
                                type="text" 
                                id="email" 
                                name="email" 
                                class="control "
                                value= "<%= locals.oldData ? oldData.email : null %>"
                            >
                        </label><% if (locals.errors && errors.email) {%>
                            <div class="text-danger">
                                <%= errors.email.msg %>
                            </div>
                        <%} %><br><br>

                        <select style="font-size: 20px;" name="rol" >
                            <option >Elige un rol</option>
                            <%  let opciones = ['Administrador', 'Cliente']; %>
                        <% for (const oneOption of opciones) { %>
                            <option 
                                value="<%= oneOption %>"
                                <%= locals.oldData && (oneOption === oldData.rol) ? 'selected' : null %> 
                            > <%= oneOption %> </option>
                        <% } %>
                        </select>

                        <% if (locals.errors && errors.rol) {%>
                            <div >
                                <%= errors.rol.msg %>
                            </div>
                        <%} %><br><br>

                        <label for="password">Contraseña:
                            <input type="password" id="password" name="password" class="control">
                        </label>
                        <% if (locals.errors && errors.password) {%>
                            <div class="text-danger">
                                <%= errors.password.msg %>
                            </div>
                        <%} %><br><br>
                        <label for="avatar">Imagen de usuario:
                            <input type="file" size="24" name="avatar" class="control">
                        </label>
                        <% if (locals.errors && errors.usuarios) {%>
                            <div class="text-danger">
                                <%= errors.usuarios.msg %>
                            </div>
                        <%} %>
                    </div>
                    
                    <div>
                        <label for="term2" class="term">
                            <input type="checkbox" name="term2" required>
                            He leído y acepto los Términos y Condiciones y Aviso de Privacidad.
                        </label>
                    </div>

                    <div class="enviar">
                        <button type="submit">Enviar</button>
                    </div>
                </form>
            </div>
        </div>
    </main>
    <% } %> 
</body>
</html>
